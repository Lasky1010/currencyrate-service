# CurrencyRate API

Этот API позволяет загружать и получать курсы валют по дате. Сервис взаимодействует с внешним API НБРБ для получения и
сохранения курсов валют, а также предоставляет возможность получить курс валюты на определенную дату.

## Основные возможности

- Загрузка курсов валют на определенную дату
- Получение курса валюты на указанную дату

## Технологии

- **Java 17**
- **Spring Boot**
- **Lombok**
- **MapStruct**
- **H2 DB**

## Установка

1. #### Склонируйте репозиторий:
   ```sh
   git clone https://github.com/Lasky1010/currencyrate-service.git
2. #### По желанию настройте подключение к БД:
   [application.yml](src/main/resources/application.yml)
3. #### Установите зависимости и соберите проект:
    ```sh
   mvn clean install 
4. #### Тесты
   ```sh
   mvn test
5. #### Запустите приложение

## Endpoints

### 1. Загрузка курсов валют за дату

```http
  POST /api/currency
```

| Параметр | Описание                                                                                   |
|:---------|--------------------------------------------------------------------------------------------|
| `date`   | **Обязательный**. Дата, за которую нужно получить<br/> курс валюты в формате `yyyy-MM-dd`. |

Пример запроса:

```
http://localhost:8080/api/currency?date=2024-06-29
```

Примеры ответа:

| Тело            | Статус |
|:----------------|--------|
| Rates saved     | 200    |
| Rates not saved | 200    |

### 2. Получение курса валюты за дату

```http
  GET /api/currency
```

| Параметр   | Описание                                                                                     |
|:-----------|----------------------------------------------------------------------------------------------|
| `date`     | **Необязательный**. Дата, за которую нужно получить<br/> курс валюты в формате `yyyy-MM-dd`. |
| `cur_code` | **Обязательный**. Код валюты                                                                 |

## Примечание

В случае, если дата не указана, используется текущая дата.

Пример запроса:

```
http://localhost:8080/api/currency?date=2024-06-29&cur_code=USD
```

Примеры ответа:

Найдено

```json
{
  "id": 8,
  "currencyCode": "USD",
  "name": "Доллар США",
  "rate": 3.1624,
  "date": "2024-06-29"
}
```

Не найдено

```json
{
  "timestamp": "2024-06-30T10:01:45.129+00:00",
  "status": 400,
  "error": "Bad Request",
  "path": "/api/currency"
}
```
